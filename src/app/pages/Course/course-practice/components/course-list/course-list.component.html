<ng-container class="w-100">
    <nz-splitter>
        <nz-splitter-panel nzDefaultSize="100%">
            <div class="card h-100 border-0 rounded-0">
                <div class="card-header bg-white border-bottom d-flex align-items-center">
                    <h6 class="mb-0">Danh sách khóa học</h6>
                </div>
                <div class="card-body p-3">
                    <!-- Empty state when no category selected -->
                    <div *ngIf="courseData.length === 0" class="empty-state">
                        <nz-icon nzType="book" nzTheme="outline" class="empty-icon"></nz-icon>
                        <p class="empty-text">Vui lòng chọn danh mục để xem các khóa học</p>

                    </div>

                    <!-- Course Cards Grid -->
                    <div *ngIf="courseData.length > 0" class="course-grid">
                        <div *ngFor="let course of courseData; let i = index" class="course-card"
                            [class.locked]="isCourseLocked(course)">
                            <!-- Lock Badge for locked courses -->
                            <div *ngIf="isCourseLocked(course)" class="lock-badge" nz-tooltip
                                nzTooltipTitle="Bạn cần hoàn thành khóa học trên để mở khóa khóa học này"
                                nzTooltipPlacement="left">
                                <span nz-icon nzType="lock" nzTheme="fill"></span>
                                Chưa mở khóa
                            </div>
                            <!-- Card Header -->
                            <div class="course-card-header">
                                <nz-tag [nzColor]="course.DeleteFlag ? 'success' : 'default'"
                                    style="margin: 0; width: fit-content;">
                                    {{ course.DeleteFlag ? 'Hoạt động' : 'Dừng hoạt động' }}
                                </nz-tag>
                                <h5 class="course-title" (click)="onViewCourseDetail(course)"
                                    [title]="course.NameCourse">{{ course.NameCourse }}
                                </h5>
                                <div style="font-size: 13px; color: #8c8c8c;">
                                    {{ course.Instructor || 'N/A' }}
                                </div>
                            </div>

                            <!-- Card Body -->
                            <div class="course-card-body">
                                <div class="course-info-row">
                                    <span class="info-label">Bài học:</span>
                                    <span class="info-value">{{ course.TotalHistoryLession || 0 }} / {{
                                        course.NumberLesson || 0 }}</span>
                                </div>

                                <div class="course-info-row">
                                    <span class="info-label">Thời gian học (ngày):</span>
                                    <span class="info-value">{{ formatDicimal(course.TotalTimeLearned)
                                        }} / {{ formatDicimal(course.LeadTime)
                                        }}</span>
                                </div>

                                <div class="course-info-row">
                                    <span class="info-label">Điểm thi:</span>
                                    <span class="info-value exam-buttons">
                                        <ng-container *ngFor="let exam of courseExamData">
                                            <!-- Trắc nghiệm (ExamType = 1) -->
                                            <button *ngIf="exam.ExamType === 1 && exam.CourseId === course.ID"
                                                type="button" class="btn btn-primary btn-sm shadow-none ms-1"
                                                title="Trắc nghiệm" style="font-size: 11px; padding: 2px 6px;">
                                                {{ formatDicimal(course.QuizPoints) || 0.00 }} / {{
                                                formatDicimal(course.GoalMultiChoice) || 0.00 }}
                                            </button>
                                            <!-- Thực hành (ExamType = 2) -->
                                            <button *ngIf="exam.ExamType === 2 && exam.CourseId === course.ID"
                                                type="button" class="btn btn-warning btn-sm text-dark shadow-none ms-1"
                                                title="Thực hành" style="font-size: 11px; padding: 2px 6px;">
                                                {{ formatDicimal(course.PracticePoints) || 0.00 }} / {{
                                                formatDicimal(course.GoalPractice) || 0.00 }}
                                            </button>
                                            <!-- Bài tập (ExamType = 3 or else) -->
                                            <button *ngIf="exam.ExamType === 3 && exam.CourseId === course.ID"
                                                type="button" class="btn btn-info btn-sm text-dark shadow-none ms-1"
                                                title="Bài tập" style="font-size: 11px; padding: 2px 6px;">
                                                {{ formatDicimal(course.ExcercisePoints) || 0.00 }} / {{
                                                formatDicimal(course.GoalExercise) || 0.00 }}
                                            </button>

                                        </ng-container>
                                        <span *ngIf="!hasExamByCourse(course.ID)" style="color: #999; font-size: 12px;">
                                            Chưa có bài thi
                                        </span>

                                    </span>
                                </div>

                                <div class="course-info-row">
                                    <span class="info-label">Đánh giá:</span>
                                    <span class="info-value">{{course.EvaluateText}}</span>
                                </div>
                            </div>

                            <!-- Card Footer -->
                            <div class="course-card-footer">
                                <button nz-button [nzType]="isCourseLocked(course) ? 'default' : 'primary'"
                                    nzSize="default" class="detail-button" (click)="onViewCourseDetail(course)"
                                    [disabled]="isCourseLocked(course)">
                                    <span *ngIf="isCourseLocked(course)" nz-icon nzType="lock" nzTheme="outline"></span>
                                    {{ isCourseLocked(course) ? 'Chờ mở khóa' : 'Xem chi tiết' }}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nz-splitter-panel>
    </nz-splitter>
</ng-container>