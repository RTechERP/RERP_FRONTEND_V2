<div class="modal-dialog-scrollable">
  <div class="modal-header bg-primary align-items-center ps-2">
    <h6 class="text-light text-uppercase m-0" style="padding: 0, 5rem">
      {{ modalTitle }}
    </h6>
  </div>

  <div class="modal-body pt-0 pb-0 p-2 pb-2 w-100">
    <form [formGroup]="meetingTypeForm">
      <nz-row [nzGutter]="12">
        <!-- Mã loại cuộc họp -->
        <nz-col [nzSpan]="12">
          <nz-form-item class="pt-1">
            <nz-form-label class="fs-12 d-flex align-items-center">
              Mã loại cuộc họp <span class="text-danger ps-1">(*)</span>
            </nz-form-label>
            <input
              nz-input
              formControlName="typeCode"
              placeholder="Mã loại cuộc họp"
              [disabled]="saving"
              [class.is-invalid]="isFieldInvalid('typeCode')"
            />
            <div *ngIf="isFieldInvalid('typeCode')" class="text-danger fs-11 mt-1">
              {{ getFieldError('typeCode') }}
            </div>
          </nz-form-item>
        </nz-col>

        <!-- Nhóm cuộc họp -->
        <nz-col [nzSpan]="12">
          <nz-form-item class="pt-1">
            <nz-form-label class="fs-12 d-flex align-items-center">
              Nhóm cuộc họp <span class="text-danger ps-1">(*)</span>
            </nz-form-label>
            <nz-select
              formControlName="groupId"
              class="w-100"
              nzShowSearch
              nzAllowClear
              nzPlaceHolder="Chọn nhóm cuộc họp"
              [disabled]="saving"
              [class.is-invalid]="isFieldInvalid('groupId')"
            >
              @for (item of groupOptions; track $index) {
              <nz-option
                nzCustomContent="true"
                [nzLabel]="item.label"
                [nzValue]="item.value"
                >{{ item.label }}</nz-option
              >
              }
            </nz-select>
            <div *ngIf="isFieldInvalid('groupId')" class="text-danger fs-11 mt-1">
              {{ getFieldError('groupId') }}
            </div>
          </nz-form-item>
        </nz-col>

        <!-- Tên loại cuộc họp -->
        <nz-col [nzSpan]="24">
          <nz-form-item class="pt-1">
            <nz-form-label class="fs-12 d-flex align-items-center">
              Tên loại cuộc họp <span class="text-danger ps-1">(*)</span>
            </nz-form-label>
            <input
              nz-input
              formControlName="typeName"
              placeholder="Tên loại cuộc họp"
              [disabled]="saving"
              [class.is-invalid]="isFieldInvalid('typeName')"
            />
            <div *ngIf="isFieldInvalid('typeName')" class="text-danger fs-11 mt-1">
              {{ getFieldError('typeName') }}
            </div>
          </nz-form-item>
        </nz-col>

        <!-- Nội dung cuộc họp -->
        <nz-col [nzSpan]="24">
          <nz-form-item class="pt-1">
            <nz-form-label class="fs-12 d-flex align-items-center">
              Nội dung cuộc họp
            </nz-form-label>
            <textarea
              formControlName="typeContent"
              rows="5"
              nz-input
              placeholder="Nhập mô tả chi tiết về nội dung, mục đích của loại cuộc họp này..."
              [disabled]="saving"
              [class.is-invalid]="isFieldInvalid('typeContent')"
            ></textarea>
            <div *ngIf="isFieldInvalid('typeContent')" class="text-danger fs-11 mt-1">
              {{ getFieldError('typeContent') }}
            </div>
          </nz-form-item>
        </nz-col>
      </nz-row>
    </form>
  </div>

  <div class="modal-footer br p-1 d-flex align-items-center">
    <div class="d-flex align-items-center flex-wrap gap-1">
      <button
        nz-button
        nzType="default"
        nzDanger
        (click)="activeModal.dismiss()"
        [disabled]="saving"
      >
        Đóng
      </button>
      <button 
        nz-button 
        nzType="primary" 
        (click)="saveMeetingType()"
        [nzLoading]="saving"
        [disabled]="saving || meetingTypeForm.invalid"
      >
        {{ saving ? 'Đang lưu...' : 'Lưu' }}
      </button>
    </div>
  </div>
</div>