<ng-container class="w-100">
    <div class="card h-100 border-0 rounded-0">
        <div class="card-header bg-white p-2">
            <div class="d-flex justify-content-between align-items-center">
                <div class="d-flex gap-2">
                    <button class="fs-12 btn-add" nz-button nzType="default" nzSize="small" nz-button nzType="default"
                        nzSize="small" (click)="openAddModal()" *hasPermission="'N1,N2'">
                        <img src="assets/icon/action_add_item_16.png" alt="Thêm " /> Thêm
                    </button>
                    <button class="fs-12 btn-edit" nz-button nzType="default" nzSize="small" nz-button nzType="default"
                        nzSize="small" (click)="openEditModal()" *hasPermission="'N1,N2'">
                        <img src="assets/icon/action_edit_item_16.png" alt="Sửa" />Sửa
                    </button>
                    <button class="fs-12 btn-delete" nz-button nzType="default" nzSize="small" nz-button
                        nzType="default" nzSize="small" (click)="openDeleteModal()" *hasPermission="'N1,N2'">
                        <img src="assets/icon/action_delete_item_16.png" alt="Xóa " />Xóa
                    </button>
                </div>
                <!-- <div class="d-flex gap-2">
          <nz-input-group nzPrefixIcon="search" nzSize="small">
            <input type="text" nz-input placeholder="Tìm kiếm..." (input)="onSearch($event)" />
          </nz-input-group>
        </div> -->
            </div>
        </div>

        <div class="card-body p-0 position-relative">
            <div *ngIf="isLoading">
                <nz-spin [nzSpinning]="isLoading" nzSimple [style]="{
            position: 'absolute',
            top: '0',
            left: '0',
            width: '100%',
            height: '100%',
            background: 'rgba(255,255,255,0.4)',
            zIndex: '999',
            display: 'flex',
            alignItems: 'center',
            justifyContent: 'center'
          }"></nz-spin>
            </div>
            <div id="tb_department"></div>
        </div>
    </div>
</ng-container>

<nz-modal [(nzVisible)]="isVisible" [nzTitle]="isEditMode ? 'SỬA PHÒNG BAN' : 'THÊM PHÒNG BAN MỚI'"
    (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()" [nzOkText]="'Lưu'" [nzCancelText]="'Đóng'"
    [nzOkLoading]="isSubmitting">
    <ng-container *nzModalContent>
        <form nz-form [formGroup]="departmentForm" (ngSubmit)="onSubmit()">
            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Số thứ tự <span class="text-danger ps-1"> *</span></nz-form-label>
                <nz-form-control [nzSpan]="24">
                    <input nz-input type="number" formControlName="STT" [readonly]="true" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Mã phòng ban<span class="text-danger ps-1"> *</span></nz-form-label>
                <nz-form-control [nzSpan]="24" nzErrorTip="Vui lòng nhập mã phòng ban">
                    <input nz-input formControlName="Code" placeholder="Nhập mã phòng ban" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Tên phòng ban <span class="text-danger ps-1"> *</span></nz-form-label>
                <nz-form-control [nzSpan]="24" nzErrorTip="Vui lòng nhập tên phòng ban">
                    <input nz-input formControlName="Name" placeholder="Nhập tên phòng ban" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Trưởng phòng <span class="text-danger ps-1"> *</span></nz-form-label>
                <nz-form-control [nzSpan]="24" nzErrorTip="Vui lòng chọn trưởng phòng">
                    <nz-select formControlName="HeadofDepartment" nzPlaceHolder="Chọn trưởng phòng" class="w-100"
                        nzShowSearch nzAllowClear nzPlaceHolder="--Chọn trưởng phòng--">
                        <ng-container *ngFor="let group of employeeList">
                            <nz-option-group [nzLabel]="group.label">
                                <nz-option *ngFor="let option of group.options"
                                    [nzLabel]="option.item.Code +' - '+ option.item.FullName"
                                    [nzValue]="option.item.EmployeeID">
                                </nz-option>
                            </nz-option-group>
                        </ng-container>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>
            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Email</nz-form-label>
                <nz-form-control [nzSpan]="24">
                    <input nz-input type="email" maxlength="100" formControlName="Email" placeholder="Nhập email" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Trạng thái</nz-form-label>
                <nz-form-control [nzSpan]="24" nzErrorTip="Vui lòng chọn trạng thái">
                    <nz-select class="w-100" nzShowSearch nzSize="default" formControlName="Status">
                        <nz-option nzLabel="Ngừng hoạt động" [nzValue]="0"></nz-option>
                        <nz-option nzLabel="Hoạt động" [nzValue]="1"></nz-option>
                    </nz-select>
                </nz-form-control>
            </nz-form-item>
        </form>
    </ng-container>

</nz-modal>