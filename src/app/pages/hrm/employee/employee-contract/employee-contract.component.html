<ng-container class="w-100">
  <div class="card h-100 border-0 rounded-0">
    <div class="card-header bg-white p-2">
      <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex gap-2">
          <button class="fs-12 btn-add" nz-button nzType="default" nzSize="small" (click)="openAddModal()">
            <img src="assets/icon/action_add_item_16.png" alt="Thêm " /> Thêm
          </button>
          <button class="fs-12 btn-edit" nz-button nzType="default" nzSize="small" (click)="openEditModal()">
            <img src="assets/icon/action_edit_item_16.png" alt="Sửa" />Sửa
          </button>
          <button class="fs-12 btn-delete" nz-button nzType="default" nzSize="small" (click)="openDeleteModal()">
            <img src="assets/icon/action_delete_item_16.png" alt="Xóa " />Xóa
          </button>
          <button class="fs-12" nz-button nzType="default" nzSize="small" (click)="exportExcel()">
            <img src="assets/icon/action_export_excel_16.png" alt="Xuất excel" />Xuất excel
          </button>
          <button class="fs-12" nz-button nzType="default" nzSize="small" (click)="printContract()"
            [nzLoading]="isPrinting" [disabled]="isPrinting">
            <img src="assets/icon/action_print_16.png" alt="In hợp đồng" />In hợp đồng
          </button>
        </div>
        <div>
          <button nz-button nzType="text" nzSize="small"
            style="font-size: 0.75rem; border: 1px solid red; background-color: red; color: white;">
            Đã xóa
          </button>
        </div>
      </div>
      <form class="search-form d-flex align-items-center gap-3 mt-2" nz-form nzLayout="horizontal">
        <nz-form-item class="mb-1" class="mb-0">
          <nz-form-label class="mb-0">Nhân viên</nz-form-label>
          <nz-form-control>
            <nz-select [(ngModel)]="employeeId" name="employeeId" nzShowSearch style="width: 15vw;" nzAllowClear
              (nzValueChange)="onSearch()" nzPlaceHolder="--Chọn nhân viên--">
              <ng-container *ngFor="let group of employeeList">
                <nz-option-group [nzLabel]="group.label">
                  <nz-option *ngFor="let option of group.options"
                    [nzLabel]="option.item.Code +' - '+ option.item.FullName" [nzValue]="option.item.EmployeeID">
                  </nz-option>
                </nz-option-group>
              </ng-container>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-1" class="mb-0">
          <nz-form-label class="mb-0">Loại HĐLĐ</nz-form-label>
          <nz-form-control>
            <nz-select style="width: 10vw;" nzAllowClear nzShowSearch [(ngModel)]="contractType" name="contractType">
              <nz-option *ngFor="let c of contractTypeList" [nzValue]="c.ID" [nzLabel]="c.Name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-1" class="mb-0">
          <nz-form-label class="mb-0">Từ khóa</nz-form-label>
          <nz-form-control>
            <input nz-input placeholder="Nhập từ khóa" style="width: 10vw;" [(ngModel)]="keyword" name="keyword" />
          </nz-form-control>
        </nz-form-item>
        <button nz-button nzType="default" style="font-size: 0.75rem; font-weight: bold;" (click)="onSearch()">
          <nz-icon nzType="search" /> Tìm kiếm
        </button>
      </form>
    </div>
    <div class="card-body p-0">
      <div id="tb_employee_contract"></div>
    </div>
  </div>
</ng-container>


<div class="modal fade" id="addEmployeeContractModal" tabindex="-1" aria-labelledby="addEmployeeContractModalLabel"
  aria-hidden="true" data-bs-backdrop="false">
  <div class="modal-dialog modal-dialog-centered fs-12">
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <h6 class="modal-title text-uppercase text-white" id="addSpecializationModalLabel">
          CHI TIẾT HỢP ĐỒNG LAO ĐỘNG
        </h6>
        <button type="button" class="btn-close me-2" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form nz-form [formGroup]="employeeContractForm">
          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">STT</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="STT" />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">Nhân viên<span class="text-danger ps-1">*</span></nz-form-label>
            <nz-form-control [nzSpan]="24">
              <nz-select formControlName="EmployeeID" nzShowSearch nzAllowClear nzPlaceHolder="--Chọn nhân viên--">
                <ng-container *ngFor="let group of employeeList">
                  <nz-option-group [nzLabel]="group.label">
                    <nz-option *ngFor="let option of group.options"
                      [nzLabel]="option.item.Code +' - '+ option.item.FullName" [nzValue]="option.item.EmployeeID">
                    </nz-option>
                  </nz-option-group>
                </ng-container>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">Loại HĐLĐ<span class="text-danger ps-1">*</span></nz-form-label>
            <nz-form-control [nzSpan]="24">
              <nz-select formControlName="EmployeeLoaiHDLDID" nzAllowClear nzShowSearch (ngModelChange)="onContractTypeChange($event)">
                <nz-option *ngFor="let c of contractTypeList" [nzValue]="c.ID" [nzLabel]="c.Name"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
          <nz-row [nzGutter]="24">
            <nz-col [nzSpan]="12">
              <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Ngày bắt đầu<span class="text-danger ps-1">*</span></nz-form-label>
                <nz-form-control [nzSpan]="24">
                  <nz-date-picker formControlName="DateStart" nzFormat="dd/MM/yyyy"
                    style="width: 100%;"></nz-date-picker>
                </nz-form-control>
              </nz-form-item>
            </nz-col>
            <nz-col [nzSpan]="12">
              <nz-form-item class="mb-1">
                <nz-form-label [nzSpan]="24">Ngày kết thúc<span class="text-danger ps-1">*</span></nz-form-label>
                <nz-form-control [nzSpan]="24">
                  <nz-date-picker formControlName="DateEnd" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
                </nz-form-control>
              </nz-form-item>
            </nz-col>
          </nz-row>
          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">Số hợp đồng<span class="text-danger ps-1">*</span></nz-form-label>
            <nz-form-control [nzSpan]="24">
              <input nz-input formControlName="ContractNumber" />
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">Trạng thái</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <nz-select formControlName="StatusSign">
                <nz-option [nzValue]="2" nzLabel="Đã ký"></nz-option>
                <nz-option [nzValue]="1" nzLabel="Chưa ký"></nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>
          <nz-form-item class="mb-1">
            <nz-form-label [nzSpan]="24">Ngày ký</nz-form-label>
            <nz-form-control [nzSpan]="24">
              <nz-date-picker formControlName="DateSign" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
            </nz-form-control>
          </nz-form-item>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline-danger" data-bs-dismiss="modal"
          style="border: 1px solid; border-radius: 0;">
          Đóng
        </button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()" style="border-radius: 0;">
          Lưu
        </button>
      </div>
    </div>
  </div>
</div>