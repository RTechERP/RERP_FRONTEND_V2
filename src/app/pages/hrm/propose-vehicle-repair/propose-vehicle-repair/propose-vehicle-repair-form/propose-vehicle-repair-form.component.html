<div class="modal-header bg-primary p-2">
        <h6 class="modal-title text-white">ĐỀ XUẤT BÁO SỬA XE NỘI BỘ</h6>
        <button type="button" class="btn-close" aria-label="Close" (click)="close()"></button>
    </div>

    <div class="modal-body p-1 " style="max-height: 80vh; overflow-y: auto; overflow-x: hidden;">
        <nz-tabset [(nzSelectedIndex)]="activeTab" (nzSelectedIndexChange)="onTabChange($event)">
            <nz-tab nzTitle="Thông tin đề xuất"   [nzForceRender]="true">
        <form [formGroup]="formGroup" class="row g-3 ">
          <nz-row [nzGutter]="5">
                 <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="12">
                    <fieldset class="reset mt-2">
                        <legend class="reset fs-12 p-0">THÔNG TIN XE</legend>
                        <nz-row [nzGutter]="24">
                       <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Chọn xe<span class="text-danger ps-1 me-1"> (*)
                                        </span>
                                    </nz-form-label>
                                    <nz-form-control [nzErrorTip]="'Chọn xe'">
                                        <nz-input-group required nzSearch nzSize="default" class="w-100">
                                            <nz-select nzSize="default" formControlName="VehicleManagementID"
                                                name="VehicleManagementID" nzPlaceHolder="Chọn xe" class="fs-12 w-100"
                                                required nzShowSearch nzAllowClear>
                                                <nz-option *ngFor="let item of vehicleList" [nzValue]="item.ID"
                                                    [nzLabel]="item.STT + ' - ' + item.VehicleName">
                                                </nz-option>
                                            </nz-select>
                                        </nz-input-group>

                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>
                        <nz-row [nzGutter]="24">
                          <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Biển số xe
                                    </nz-form-label>
                                    <nz-form-control [nzSpan]="24" >
                                        <input nz-input formControlName="LicensePlate" name="LicensePlate"  [disabled]="true"  />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>
                    </fieldset>
                </nz-col>
               <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="12">
                    <fieldset class="reset mt-2">
                        <legend class="reset fs-12 p-0">THÔNG TIN LÁI XE</legend>
                        <nz-row [nzGutter]="24">
                           <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Chọn nhân viên<span class="text-danger ps-1 me-1"> (*)
                                        </span>
                                    </nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <nz-input-group required nzSearch nzSize="default" class="w-100">
                                            <nz-select nzSize="default" formControlName="EmployeeID" name="EmployeeID"
                                                nzPlaceHolder="Chọn nhân viên" class="fs-12 w-100" required nzShowSearch
                                                nzAllowClear>
                                                <nz-option *ngFor="let item of employeeList" [nzValue]="item.ID"
                                                    [nzLabel]="item.Code + ' - ' + item.FullName">
                                                </nz-option>
                                            </nz-select>
                                        </nz-input-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>
                        <nz-row [nzGutter]="24">
                            <nz-col [nzSpan]="6">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Mã NV<span class="text-danger ps-1 me-1"> (*)
                                        </span></nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <input nz-input type="text" formControlName="EmployeeCode" readonly />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                            <nz-col [nzSpan]="18">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">SDT<span class="text-danger ps-1 "> (*)
                                        </span></nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <input nz-input formControlName="SDT" readonly />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>

                    </fieldset>
                </nz-col>
            </nz-row>
            <nz-row [nzGutter]="5">
               <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="24">
                    <fieldset class="reset mt-2">
                        <legend class="reset fs-12 p-0">THÔNG TIN SỬA CHỮA</legend>
                      <nz-row [nzGutter]="16">
                             <nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Loại sửa chữa<span class="text-danger ps-1 me-1"> (*)
                                        </span> <button nz-button nzSize="small" class="fs-12 button button-succes me-2"
                                            title="Thêm loại sửa chữa" (click)="addType()"><nz-icon nzType="plus" />
                                        </button></nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <nz-input-group required nzSearch nzSize="default" class="w-100">
                                            <nz-select nzSize="default" formControlName="VehicleRepairTypeID"
                                                name="VehicleRepairTypeID" nzPlaceHolder="Chọn loại sửa chữa"
                                                class="fs-12 w-100" required nzShowSearch nzAllowClear>
                                                <nz-option *ngFor="let item of TypeList" [nzValue]="item.ID"
                                                    [nzLabel]="item.STT + ' - ' + item.RepairTypeName">
                                                </nz-option>
                                            </nz-select>
                                        </nz-input-group>
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                            <nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Ngày đề xuất<span class="text-danger ps-1 me-1"> (*)
                                        </span></nz-form-label>
                                    <nz-form-control [nzSpan]="24"
                                        [nzErrorTip]="formGroup.get('DatePropose')?.invalid && (formGroup.get('DatePropose')?.dirty || formGroup.get('DatePropose')?.touched) ? 'Vui lòng chọn ngày đề xuất!' : undefined">
                                        <input nz-input type="date" placeholder="Chọn ngày đề xuất"
                                            formControlName="DatePropose" />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                           <nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Ngày bắt đầu<span class="text-danger ps-1 me-1"> (*)
                                        </span></nz-form-label>
                                    <nz-form-control [nzSpan]="24" [nzErrorTip]="formGroup.get('TimeStartRepair')?.invalid && (formGroup.get('TimeStartRepair')?.dirty || formGroup.get('TimeStartRepair')?.touched)
                                    ? 'Vui lòng chọn ngày bắt đầu!': undefined">
                                        <input nz-input type="date" placeholder="Chọn ngày bắt đầu"
                                            formControlName="TimeStartRepair" />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                             <nz-col [nzXs]="24" [nzSm]="12" [nzMd]="12" [nzLg]="6">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Ngày kết thúc</nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <input nz-input type="date" placeholder="Nhập ngày kết thúc"
                                            formControlName="TimeEndRepair" />
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>
                 
                       <nz-row [nzGutter]="16" class="mt-2">
                             <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="8">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Lý do đề xuất<span class="text-danger ps-1 me-1"> (*)
                                        </span>
                                    </nz-form-label>
                                    <nz-form-control [nzSpan]="24" [nzErrorTip]="
                                (formGroup.get('Reason')?.hasError('required') &&
                                (formGroup.get('Reason')?.dirty || formGroup.get('Reason')?.touched))
                                ? 'Vui lòng nhập lý do sửa chữa!': undefined">
                                        <textarea nz-input rows="3" placeholder="Nhập lý do sửa chữa"
                                            formControlName="Reason"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                           <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="8">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Nội dung đề xuất<span class="text-danger ps-1 me-1"> (*)
                                        </span>
                                    </nz-form-label>

                                    <nz-form-control [nzSpan]="24" [nzErrorTip]="
                            (formGroup.get('ProposeContent')?.hasError('required') &&
                            (formGroup.get('ProposeContent')?.dirty || formGroup.get('ProposeContent')?.touched))
                            ? 'Vui lòng nhập nội dung đề xuất!': undefined">
                                        <textarea nz-input rows="3" placeholder="Nhập nội dung đề xuất"
                                            formControlName="ProposeContent"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                            <nz-col [nzXs]="24" [nzSm]="24" [nzMd]="12" [nzLg]="8">
                                <nz-form-item class="col-md-12">
                                    <nz-form-label [nzSpan]="24">Ghi chú
                                    </nz-form-label>
                                    <nz-form-control [nzSpan]="24">
                                        <textarea nz-input rows="3" placeholder="Nhập ghi chú"
                                            formControlName="Note"></textarea>
                                    </nz-form-control>
                                </nz-form-item>
                            </nz-col>
                        </nz-row>
                    </fieldset>
                </nz-col>
            </nz-row>
        </form>
        </nz-tab>
    <nz-tab nzTitle="NCC đề xuất"  [nzForceRender]="true">
    <div class="d-flex gap-2 mb-1 mt-1">
            <nz-form-label [nzSpan]="24">Danh sách nhà cung cấp đề xuất</nz-form-label>
        <!-- <button nz-button nzType="primary" (click)="addDetailRow()">+ dòng</button>
        <button nz-button nzDanger (click)="clearDetails()">Xóa hết</button> -->
    </div>
    <div #tblNcc class="w-100" style="height:52vh"></div>
    </nz-tab>
        </nz-tabset>
    </div>
    <div class="modal-footer">
        <button nz-button nzType="default" nzDanger (click)="close()">Đóng</button>
        <button nz-button nzType="primary" (click)="save()">Lưu dữ liệu</button>
    </div>