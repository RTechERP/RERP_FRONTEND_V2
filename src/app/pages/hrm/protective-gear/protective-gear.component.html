<ng-container class="w-100">
  <nz-splitter>
    <nz-splitter-panel nzDefaultSize="100%">
      <div class="card h-100 border-0 rounded-0">
        <!-- ✅ Giữ nguyên header với các nút hiện tại -->
        <div class="card-header bg-white p-1">
          <div class="d-flex gap-1 align-items-center">
            <button
              class="fs-12"
              nz-button
              nzType="default"
              nzSize="small"
              (click)="exportToExcel()"
              [disabled]="
                !filteredProtectiveGears || filteredProtectiveGears.length === 0
              "
            >
              <nz-icon nzType="file-excel" nzTheme="fill"></nz-icon>
              Xuất Excel 
            </button>
            <button
              class="fs-12"
              nz-button
              nzType="default"
              nzSize="small"
              (click)="addQRCode()"
            >
              <nz-icon nzType="qrcode" nzTheme="outline"></nz-icon> Thêm QR Code
            </button>
            <button
              class="fs-12"
              nz-button
              nzType="default"
              nzSize="small"
              (click)="NCCReport()"
            >
              <nz-icon nzType="book" nzTheme="fill"></nz-icon> Báo cáo NCC
            </button>
            <!-- ✅ Giữ nguyên thanh tìm kiếm -->
            <div class="ms-auto d-flex gap-1 align-items-center">
              <nz-input-group [nzSuffix]="clearTemplate" style="width: 250px">
                <input
                  nz-input
                  type="text"
                  placeholder="Enter text to search..."
                  [(ngModel)]="searchValue"
                  (ngModelChange)="onSearch()"
                  (keyup.enter)="onSearch()"
                />
              </nz-input-group>

              <!-- Template cho nút X xóa -->
              <ng-template #clearTemplate>
                <nz-icon
                  *ngIf="searchValue && searchValue.trim().length > 0"
                  nzType="close-circle"
                  nzTheme="fill"
                  (click)="clearSearch()"
                  class="search-clear-icon"
                  title="Xóa nội dung tìm kiếm"
                ></nz-icon>
              </ng-template>

              <!-- Nút Tìm kiếm bên ngoài -->
              <button
                class="fs-12"
                nz-button
                nzType="primary"
                nzSize="small"
                (click)="onSearch()"
                [disabled]="!searchValue || searchValue.trim().length === 0"
              >
                <nz-icon nzType="search"></nz-icon> Tìm kiếm
              </button>
            </div>
          </div>
        </div>

        <!-- ✅ Phần body được chia thành 2 bảng bằng nz-splitter -->
        <div class="card-body p-0" style="position: relative">
          <!-- Loading overlay cho toàn bộ -->
          <div
            *ngIf="isLoadTable"
            style="
              position: absolute;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background: rgba(255, 255, 255, 0.4);
              z-index: 999;
              display: flex;
              align-items: center;
              justify-content: center;
            "
          >
            <nz-spin [nzSpinning]="isLoadTable" nzSimple></nz-spin>
          </div>

          <nz-splitter class="h-100">
            <nz-splitter-panel nzDefaultSize="30%" nzMin="20%" nzMax="70%">
              <div class="h-100 border-end">
                <div class="bg-light p-2 border-bottom">
                  <small class="fw-bold text-muted">DANH MỤC NHÓM</small>
                </div>
                <div class="h-100" #tb_protectiveGearGroup></div>
              </div>
            </nz-splitter-panel>

            <nz-splitter-panel>
              <div class="h-100">
                <div class="bg-light p-2 border-bottom">
                  <small class="fw-bold text-muted">CHI TIẾT SẢN PHẨM</small>
                </div>
                <div class="h-100" #tb_protectiveGear></div>
              </div>
            </nz-splitter-panel>
          </nz-splitter>
        </div>
      </div>
    </nz-splitter-panel>
  </nz-splitter>
</ng-container>
