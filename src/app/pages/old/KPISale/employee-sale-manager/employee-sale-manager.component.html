<ng-container class="w-100">
    <nz-splitter class="h-100">
        <nz-splitter-panel nzSize="" [nzCollapsible]="true" nzResizable="true">
            <div class="card h-100 border-0 rounded-0 d-flex flex-column">
                <div class="card-header bg-white p-1" style="overflow-x: auto; flex-shrink: 0;">
                    <div class="d-flex gap-1">
                        <button nz-button nzType="default" nzSize="small" class="fs-12 btn-add"
                            (click)="onAddGroupSale()" *hasPermission="'N27,N1'">
                            <img src="assets/icon/action_add_item_16.png" alt="Thêm " />Thêm
                        </button>
                        <button class="fs-12 btn-edit" nz-button nzType="default" nzSize="small"
                            (click)="onEditGroupSale()" *hasPermission="'N27,N1'">
                            <img src="assets/icon/action_edit_item_16.png" alt="Sửa" /> Sửa
                        </button>
                        <button class="fs-12 btn-delete" nz-button nzType="default" nzSize="small"
                            (click)="onDeleteGroupSale()" *hasPermission="'N27,N1'">
                            <img src="assets/icon/action_delete_item_16.png" alt="Xóa" /> Xóa
                        </button>
                    </div>
                </div>
                <div class="card-body p-0 flex-grow-1" style="overflow: hidden;">
                    <div #tb_Master id="tb_Master" class="h-100"></div>
                </div>
            </div>
        </nz-splitter-panel>
        <nz-splitter-panel nzDefaultSize="65%" [nzCollapsible]="true" nzResizable="true">
            <div class="card h-100 border-0 rounded-0 d-flex flex-column">
                <div class="card-header bg-white p-1" style="overflow-x: auto; flex-shrink: 0;">
                    <div class="d-flex gap-1">
                        <button nz-button nzType="default" nzSize="small" class="fs-12 btn-add"
                            (click)="onAddEmployeeSale()" *hasPermission="'N27,N1'">
                            <img src="assets/icon/action_add_item_16.png" alt="Thêm " />Thêm
                        </button>
                        <button class="fs-12 btn-delete" nz-button nzType="default" nzSize="small"
                            (click)="onDeleteEmployeeSale()" *hasPermission="'N27,N1'">
                            <img src="assets/icon/action_delete_item_16.png" alt="Xóa" /> Xóa
                        </button>
                    </div>
                </div>
                <div class="card-body p-0 flex-grow-1" style="overflow: hidden;">
                    <div #tb_Detail id="tb_Detail" class="h-100"></div>
                </div>
            </div>
        </nz-splitter-panel>
    </nz-splitter>
</ng-container>

<!-- Modal Chi tiết Team Sale -->
<nz-modal 
    [(nzVisible)]="isModalVisible" 
    nzTitle="CHI TIẾT TEAM SALE" 
    (nzOnCancel)="handleModalCancel()"
    [nzWidth]="450"
    [nzFooter]="null">
    <ng-container *nzModalContent>
        <form nz-form [formGroup]="groupSaleForm" nzLayout="vertical">
            <nz-form-item>
                <nz-form-label nzRequired>Mã Team</nz-form-label>
                <nz-form-control>
                    <input nz-input formControlName="Code" placeholder="Nhập mã team" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label>STT</nz-form-label>
                <nz-form-control>
                    <nz-input-number 
                        formControlName="STT" 
                        [nzMin]="1"
                        class="w-100"
                        placeholder="Nhập STT">
                    </nz-input-number>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label nzRequired>Tên team/ tên chức vụ</nz-form-label>
                <nz-form-control>
                    <input nz-input formControlName="Name" placeholder="Nhập tên team/ tên chức vụ" />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label>Chọn team</nz-form-label>
                <nz-form-control>
                    <nz-tree-select
                        style="width: 100%"
                        [nzNodes]="teamSaleOptions"
                        formControlName="TeamSaleID"
                        nzShowSearch
                        nzAllowClear
                        nzPlaceHolder="Chọn team"
                        nzDefaultExpandAll
                        [nzDropdownStyle]="{ 'max-height': '300px', 'overflow-y': 'auto' }">
                    </nz-tree-select>
                </nz-form-control>
            </nz-form-item>

            <div class="d-flex justify-content-end gap-2 mt-3">
                <button nz-button nzType="primary" (click)="handleSave()">
                    <span>Lưu</span>
                </button>
            </div>
        </form>
    </ng-container>
</nz-modal>