<ng-container class="w-100">
  <div class="card h-100 border-0 rounded-0">
    <!-- Search Panel Above Grid -->

    <!-- PrimeNG Menubar Toolbar -->
    <p-menubar [model]="menuBars">
      <ng-template pTemplate="item" let-item>
        <a class="p-menuitem-link" [ngClass]="item.styleClass">
          <i [class]="item.icon"></i>
          <span class="p-menuitem-text">{{ item.label }}</span>
        </a>
      </ng-template>
    </p-menubar>
    <div class="card-header bg-white p-2">
      <form nz-form nzLayout="inline" (keyup.enter)="onSearch()">
        <nz-form-item>
          <nz-form-label class="fs-12">Từ ngày</nz-form-label>
          <nz-form-control>
            <nz-date-picker
              [nzFormat]="dateFormat"
              nzSize="small"
              [(ngModel)]="searchParams.dateStart"
              name="dateStart"
              [nzDisabled]="checked"
              (ngModelChange)="onDateStartChange($event)"
              style="width: 130px"
            >
            </nz-date-picker>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label class="fs-12">Đến ngày</nz-form-label>
          <nz-form-control>
            <nz-date-picker
              [nzFormat]="dateFormat"
              nzSize="small"
              [(ngModel)]="searchParams.dateEnd"
              name="dateEnd"
              [nzDisabled]="checked"
              (ngModelChange)="onDateEndChange($event)"
              style="width: 130px"
            >
            </nz-date-picker>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label class="fs-12">Lọc kho</nz-form-label>
          <nz-form-control>
            <nz-select
              nzAllowClear="true"
              nzAllowClear="true"
              [(ngModel)]="selectedKhoTypes"
              (ngModelChange)="onKhoTypeChange($event)"
              [nzMode]="'multiple'"
              [nzPlaceHolder]="'Chọn nhóm kho'"
              [nzMaxTagCount]="2"
              name="selectedKhoTypes"
              nzSize="small"
              style="width: 200px"
            >
              <nz-option
                *ngFor="let item of dataProductGroup"
                [nzLabel]="item.ProductGroupName"
                [nzValue]="item.ID"
              ></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label class="fs-12">Lọc phiếu</nz-form-label>
          <nz-form-control>
            <nz-select
              nzShowSearch
              nzAllowClear
              nzSize="small"
              [(ngModel)]="searchParams.status"
              name="status"
              style="width: 150px"
            >
              <nz-option
                *ngFor="let item of cbbStatus"
                [nzValue]="item.ID"
                [nzLabel]="item.Name"
              >
                <div class="d-flex align-items-center">
                  <span class="me-2">{{ item.ID }}</span>
                  <span>{{ item.Name }}</span>
                </div>
              </nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label class="fs-12">Từ khóa</nz-form-label>
          <nz-form-control>
            <input
              nz-input
              placeholder="Nhập từ khóa"
              [(ngModel)]="searchParams.keyword"
              name="keyword"
              nzSize="small"
              (keyup.enter)="onSearch()"
              style="width: 200px"
            />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <label
              nz-checkbox
              [(ngModel)]="checked"
              name="checked"
              (ngModelChange)="onCheckboxChange()"
              >Tất cả thời gian</label
            >
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-control>
            <button
              nz-button
              nzType="primary"
              nzSize="small"
              (click)="onSearch()"
            >
              Tìm kiếm
            </button>
          </nz-form-control>
        </nz-form-item>
      </form>
    </div>

    <!-- Grid Content -->
    <div class="card-body p-0">
      <!-- Master Grid -->
      <div class="grid-container-master">
        <angular-slickgrid
          [gridId]="'gridMaster-' + wareHouseCode"
          [columns]="columnDefinitionsMaster"
          [options]="gridOptionsMaster"
          [dataset]="datasetMaster"
          (onAngularGridCreated)="angularGridMasterReady($event.detail)"
          (onSelectedRowsChanged)="onMasterRowSelectionChanged($event.detail.eventData, $event.detail.args)"
          (onDblClick)="openModalBillImportDetail(true)"
        >
        </angular-slickgrid>
      </div>
      <!-- Detail Grid -->
      <div class="mt-2">
        <fieldset class="detail-fieldset">
          <legend class="detail-legend">
            {{ tabDetailTitle }}
          </legend>

          <nz-spin [nzSpinning]="isDetailLoad" nzTip="Đang tải dữ liệu...">
            <div class="grid-container-detail">
              <angular-slickgrid
                [gridId]="'gridDetail-' + wareHouseCode"
                [columns]="columnDefinitionsDetail"
                [options]="gridOptionsDetail"
                [dataset]="datasetDetail"
                (onAngularGridCreated)="angularGridDetailReady($event.detail)"
              >
              </angular-slickgrid>
            </div>
          </nz-spin>
        </fieldset>
      </div>
    </div>
  </div>
</ng-container>
