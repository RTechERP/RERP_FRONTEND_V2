<div class="history-container h-100">
    <!-- Header with filters and export button -->
    <div class="header-section p-2 bg-white border-bottom">
        <div class="d-flex flex-wrap align-items-center gap-2">
            <!-- Date filters -->
            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Từ ngày:</label>
                <nz-date-picker
                    [nzFormat]="dateFormat"
                    nzSize="small"
                    [(ngModel)]="searchParams.dateStart"
                    class="date-picker-input">
                </nz-date-picker>
            </div>

            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Đến ngày:</label>
                <nz-date-picker
                    [nzFormat]="dateFormat"
                    nzSize="small"
                    [(ngModel)]="searchParams.dateEnd"
                    class="date-picker-input">
                </nz-date-picker>
            </div>

            <!-- Keyword search -->
            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Từ khóa:</label>
                <input
                    nz-input
                    placeholder="Nhập từ khóa"
                    [(ngModel)]="searchParams.keyword"
                    (keyup.enter)="searchData()"
                    nzSize="small"
                    class="keyword-input" />
            </div>

            <!-- Status filter -->
            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Lọc phiếu:</label>
                <nz-select
                    nzSize="small"
                    [(ngModel)]="searchParams.status"
                    (keyup.enter)="searchData()"
                    class="status-select">
                    <nz-option
                        *ngFor="let c of cbbStatus"
                        [nzValue]="c.ID"
                        [nzLabel]="c.Name">
                    </nz-option>
                </nz-select>
            </div>

            <!-- Checkbox -->
            <label
                nz-checkbox
                [(ngModel)]="checked"
                (ngModelChange)="onCheckboxChange()">
                Tìm kiếm tất cả
            </label>

            <!-- Action buttons -->
            <button type="button" nz-button nzType="primary" nzSize="small" (click)="searchData()">
                <span nz-icon nzType="search"></span> Tìm kiếm
            </button>

            <button type="button" nz-button nzType="default" nzSize="small" (click)="resetForm()">
                <span nz-icon nzType="reload"></span> Đặt lại
            </button>

            <button type="button" class="fs-12" nz-button nzType="default" nzSize="small" (click)="exportExcel()">
                <img class="btn-action-icon" src="assets/icon/action_export_excel_24.svg" alt="Export Excel" /> Xuất Excel
            </button>
        </div>
    </div>

    <!-- Main content with grid -->
    <div class="content-section">
        <div class="grid-container-{{warehouseCode}} grid-wrapper">
            <nz-spin [nzSpinning]="isLoading">
                <angular-slickgrid
                    [gridId]="gridId"
                    [columns]="columnDefinitions"
                    [options]="gridOptions"
                    [dataset]="dataset"
                    (onAngularGridCreated)="angularGridReady($event.detail)">
                </angular-slickgrid>
            </nz-spin>
        </div>
    </div>
</div>
