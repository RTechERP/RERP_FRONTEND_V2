
<div class="modal-dialog-scrollable">
    <div class="modal-header bg-primary text-uppercase py-2" >
     <h6 class="modal-title text-white" id="addProductSaleModalLabel">Thông tin vật tư</h6>
      <button type="button" class="btn-close" (click)="closeModal()" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      <form  nz-form [formGroup]="formGroup" class="g-3 needs-validation was-validated" >
        <div class="row">
          <div class="col-md-6 ">
            <nz-form-label class="fs-12">Mã kho<span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>
            <nz-form-control [nzSpan]="24" [nzErrorTip]="formGroup.get('ProductGroupID')?.invalid && (formGroup.get('ProductGroupID')?.dirty || formGroup.get('ProductGroupID')?.touched)
            ? 'Vui lòng chọn kho!'
            : undefined">
              <nz-input-group required nzSearch nzSize="default" class="w-100">
                <nz-select
                  formControlName="ProductGroupID"
                  nzPlaceHolder="Chọn kho"
                  class="fs-12 w-100"
                  required
                  nzShowSearch
                  nzAllowClear    
                  (ngModelChange)="changeProductGroup()"                             
                >
                  <nz-option
                    *ngFor="let id of listProductGroupcbb"
                    [nzValue]="id.ID"
                    [nzLabel]="id.ProductGroupName"
                  ></nz-option>
                </nz-select>
              </nz-input-group>
            </nz-form-control>
          </div>
         
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Đơn vị<span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>  
            <nz-form-control [nzSpan]="24" [nzErrorTip]="formGroup.get('Unit')?.invalid && (formGroup.get('Unit')?.dirty || formGroup.get('Unit')?.touched)
            ? 'Vui lòng chọn đơn vị!'
            : undefined">
              <nz-input-group required [nzAddOnAfter]="unitCountIconButton" nzSearch nzSize="default" class="w-100">
                <nz-select
                  formControlName="Unit"
                  nzPlaceHolder="Chọn đơn vị"
                  class="fs-12 w-100"
                  required
                  nzShowSearch
                  nzAllowClear               
                >
                  <nz-option
                    *ngFor="let id of listUnitCount"
                    [nzValue]="id.UnitCode"
                    [nzLabel]="id.UnitName"
                  ></nz-option>
                </nz-select>
              </nz-input-group>
              <ng-template #unitCountIconButton>
                <button nz-button nzType="default" nzSize="default" nzSearch (click)="openModalUnitCountDetail()" >
                  <nz-icon nzType="plus" nzTheme="outline" />
                </button>
              </ng-template>
            </nz-form-control>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Mã thiết bị <span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>
            <nz-form-control [nzErrorTip]="getProductCodeError()">
                <input nz-input formControlName="ProductCode" />
            </nz-form-control>
          </div>
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Tồn kho đầu kì</nz-form-label>  
            <nz-form-control [nzSpan]="24" nzErrorTip="">
              <nz-input-number formControlName="NumberInStoreDauky" [style.width.%]="100" nzMin="0.0" nzStep="0.1" />
            </nz-form-control>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Tên thiết bị<span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>
            <nz-form-control [nzErrorTip]="formGroup.get('ProductName')?.invalid && (formGroup.get('ProductName')?.dirty || formGroup.get('ProductName')?.touched)
            ? 'Vui lòng nhập tên thiết bị!'
            : undefined">
                <input nz-input formControlName="ProductName" placeholder="Vui lòng nhập tên thiết bị"  />
            </nz-form-control>
          </div>
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Tồn kho cuối kì</nz-form-label>  
            <nz-form-control [nzSpan]="24" nzErrorTip="">
              <nz-input-number [style.width.%]="100" formControlName="NumberInStoreCuoiKy" nzMin="0.0" nzStep="0.1" nzSize="default" />              
            </nz-form-control>
          </div>
        </div>
        <div class="row">
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Vị trí<span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>
            <nz-form-control [nzSpan]="24" [nzErrorTip]="formGroup.get('LocationID')?.invalid && (formGroup.get('LocationID')?.dirty || formGroup.get('LocationID')?.touched)
            ? 'Vui lòng chọn vị trí!'
            : undefined">
              <nz-input-group required nzSearch nzSize="default" class="w-100" [nzAddOnAfter]="locationIconButton">
                <nz-select
                  formControlName="LocationID"
                  nzPlaceHolder="Chọn vị trí"
                  class="fs-12 w-100"
                  required
                  nzShowSearch
                  nzAllowClear               
                >
                  <nz-option
                    *ngFor="let id of listLocation"
                    [nzValue]="id.ID"
                    [nzLabel]="id.LocationName"
                  ></nz-option>
                </nz-select>
              </nz-input-group>
              <ng-template #locationIconButton>
                <button nz-button nzType="default" nzSize="default" nzSearch (click)="openModalLocationDetail()">
                  <nz-icon nzType="plus" nzTheme="outline" />
                </button>
              </ng-template>
            </nz-form-control>
          </div>
          <div class="col-md-6 pb-3">
            <nz-form-label class="fs-12">Hãng<span class="text-danger ps-1 me-1"> (*) </span></nz-form-label>  
            <nz-form-control [nzSpan]="24" [nzErrorTip]="formGroup.get('Maker')?.invalid && (formGroup.get('Maker')?.dirty || formGroup.get('Maker')?.touched)
            ? 'Vui lòng chọn hãng!'
            : undefined">
              <nz-input-group required nzSearch nzSize="default" class="w-100" [nzAddOnAfter]="firmIconButton">
                <nz-select
                  formControlName="Maker"
                  nzPlaceHolder="Chọn hãng"
                  class="fs-12 w-100"
                  required
                  nzShowSearch
                  nzAllowClear               
                >
                  <nz-option
                    *ngFor="let id of listFirm"
                    [nzValue]="id.FirmName"
                    [nzLabel]="id.FirmName"
                  ></nz-option>
                </nz-select>
              </nz-input-group>
              <ng-template #firmIconButton>
                <button nz-button nzType="default" nzSize="default" nzSearch (click)="openModalFirmDetail()">
                  <nz-icon nzType="plus" nzTheme="outline" />
                </button>
              </ng-template>
            </nz-form-control>
          </div>
        </div>  
        <div class="row">
          <div class="col-md-12">
              <nz-form-label class="fs-12">Ghi chú</nz-form-label>
              <nz-form-control>
                  <textarea nz-input placeholder="Ghi chú" formControlName="Note"></textarea>
              </nz-form-control>      
        </div>
      </div>
      </form>
    </div>
    <div class="modal-footer">
      <button class="fs-12 btn" nz-button nzDanger (click)="closeModal()">Đóng</button>
      <button tclass="fs-12 btn" nz-button nzType="primary"(click)="saveDataProductSale()"   >Lưu</button>
      <!-- (click)="isCheckmode? updateProductGroup(): addProductGroup()" -->
    </div>
  </div>

