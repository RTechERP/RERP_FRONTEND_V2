<div class="report-container h-100">
    <!-- Header with filters and export button -->
    <div class="header-section p-2 bg-white border-bottom">
        <div class="d-flex flex-wrap align-items-center gap-2">
            <!-- Date filters -->
            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Từ ngày:</label>
                <nz-date-picker [nzFormat]="dateFormat" nzSize="small" [(ngModel)]="searchParams.dateStart"
                    style="width: 120px;">
                </nz-date-picker>
            </div>

            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Đến ngày:</label>
                <nz-date-picker [nzFormat]="dateFormat" nzSize="small" [(ngModel)]="searchParams.dateEnd"
                    style="width: 120px;">
                </nz-date-picker>
            </div>

            <!-- Keyword search -->
            <div class="d-flex align-items-center gap-1">
                <label class="fs-12 mb-0">Từ khóa:</label>
                <input nz-input placeholder="Nhập từ khóa" [(ngModel)]="searchParams.keyword"
                    (keyup.enter)="searchData()" nzSize="small" style="width: 150px;" />
            </div>

            <!-- Action buttons -->
            <button nz-button nzType="primary" nzSize="small" (click)="searchData()">
                <span nz-icon nzType="search"></span> Tìm kiếm
            </button>

            <button nz-button nzType="default" nzSize="small" (click)="resetForm()">
                <span nz-icon nzType="reload"></span> Đặt lại
            </button>

            <button class="fs-12" nz-button nzType="default" nzSize="small" (click)="exportExcel()">
                <img class="btn-action-icon" src="assets/icon/excel.png" /> Xuất Excel
            </button>
        </div>
    </div>

    <!-- Main content with grids -->
    <div class="content-section d-flex" style="height: calc(100% - 50px);">
        <!-- Product Group Grid (Left panel - 20%) -->
        <div class="productgroup-panel" style="width: 20%; min-width: 200px; border-right: 1px solid #ddd;">
            <div class="panel-header bg-light p-1 border-bottom">
                <h6 class="m-0 fs-12">Nhóm sản phẩm</h6>
            </div>
            <div class="grid-container-productgroup-{{warehouseCode}}" style="height: calc(100% - 30px);">
                <nz-spin [nzSpinning]="isLoadingProductGroup">
                    <angular-slickgrid [gridId]="gridIdProductGroup" [columns]="columnDefinitionsProductGroup"
                        [options]="gridOptionsProductGroup" [dataset]="datasetProductGroup"
                        (onAngularGridCreated)="angularGridReadyProductGroup($event.detail)"
                        (onSelectedRowsChanged)="handleRowSelectionChangedProductGroup($event)"
                        (onDblClick)="handleRowDoubleClickProductGroup($event)">
                    </angular-slickgrid>
                </nz-spin>
            </div>
        </div>

        <!-- Report Grid (Right panel) -->
        <div class="report-panel flex-grow-1">
            <div class="grid-container-report-{{warehouseCode}}" style="height: 100%;">
                <nz-spin [nzSpinning]="isLoading">
                    <angular-slickgrid [gridId]="gridIdReport" [columns]="columnDefinitionsReport"
                        [options]="gridOptionsReport" [dataset]="datasetReport"
                        (onAngularGridCreated)="angularGridReadyReport($event.detail)"
                        (onDblClick)="handleRowDoubleClickReport($event)">
                    </angular-slickgrid>
                </nz-spin>
            </div>
        </div>
    </div>
</div>