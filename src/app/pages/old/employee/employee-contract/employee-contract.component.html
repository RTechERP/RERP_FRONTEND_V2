<ng-container class="w-100">
  <div class="card h-100 border-0 rounded-0">
    <div class="card-header bg-white p-2">
      <div class="d-flex justify-content-between align-items-center">
        <div class="d-flex gap-2">
          <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;" (click)="openAddModal()">
            <nz-icon nzType="plus" /> Thêm
          </button>
          <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;" (click)="openEditModal()">
            <nz-icon nzType="edit" /> Sửa
          </button>
          <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;" (click)="openDeleteModal()">
            <nz-icon nzType="delete" /> Xóa
          </button>
          <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;">
            <nz-icon nzType="export" /> Xuất excel
          </button>
          <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;" (click)="printContract()" [nzLoading]="isPrinting" [disabled]="isPrinting">
            <nz-icon nzType="snippets" /> In hợp đồng
          </button>
        </div>
        <div>
          <button
                nz-button
                nzType="text"
                nzSize="small"
                style="font-size: 0.75rem; border: 1px solid red; background-color: red; color: white;"
              >
                Đã xóa
            </button>
        </div>
        <!-- <div class="d-flex gap-2">
          <nz-input-group nzPrefixIcon="search" nzSize="small">
            <input type="text" nz-input placeholder="Tìm kiếm..." (input)="onSearch($event)" />
          </nz-input-group>
        </div> -->
      </div>
      <form class="search-form d-flex align-items-center gap-3 mt-2" nz-form nzLayout="horizontal" [formGroup]="employeeContractSearchForm">
        <nz-form-item class="mb-0">
          <nz-form-label class="fs-12 mb-0">Nhân viên</nz-form-label>
          <nz-form-control nzSize="small">
            <nz-select style="width: 200px;" nzAllowClear nzShowSearch formControlName="employee" nzSize="small">
              <nz-option *ngFor="let e of employeeList" [nzValue]="e.ID" [nzLabel]="e.FullName"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-0">
          <nz-form-label class="fs-12 mb-0">Loại HĐLĐ</nz-form-label>
          <nz-form-control nzSize="small">
            <nz-select style="width: 200px;" nzAllowClear nzShowSearch formControlName="contractType" nzSize="small">
              <nz-option *ngFor="let c of contractTypeList" [nzValue]="c.ID" [nzLabel]="c.Name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item class="mb-0">
          <nz-form-label class="fs-12 mb-0">Từ khóa</nz-form-label>
          <nz-form-control nzSize="small">
            <input
              nz-input
              placeholder="Nhập từ khóa"
              nzSize="small"
              style="width: 200px;"
              formControlName="filter"
            />
          </nz-form-control>
        </nz-form-item>
        <button nz-button nzType="default" nzSize="small" style="font-size: 0.75rem; font-weight: bold;" (click)="onSearch()">
          <nz-icon nzType="search" /> Tìm kiếm
        </button>
      </form>
    </div>
    <div class="card-body p-0">   
      <div id="tb_employee_contract"></div>
    </div>
  </div>
</ng-container>


<div
  class="modal fade"
  id="addEmployeeContractModal"
  tabindex="-1"
  aria-labelledby="addEmployeeContractModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered fs-12">
    <div class="modal-content">
      <div class="modal-header bg-primary">
        <h6
          class="modal-title text-uppercase text-white"
          id="addSpecializationModalLabel"
        >
          CHI TIẾT HỢP ĐỒNG LAO ĐỘNG
        </h6>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <form
          nz-form
          [formGroup]="employeeContractForm"
        >
        <nz-form-item>
          <nz-form-label [nzSpan]="24">STT</nz-form-label>
          <nz-form-control [nzSpan]="24">
            <input nz-input formControlName="STT"/>
          </nz-form-control>
        </nz-form-item>
  
        <nz-form-item>
          <nz-form-label [nzSpan]="24">Nhân viên<span class="text-danger"> (*)</span></nz-form-label>
          <nz-form-control [nzSpan]="24">
            <nz-select formControlName="EmployeeID" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let e of employeeList" [nzValue]="e.ID" [nzLabel]="e.FullName"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="24">Loại HĐLĐ<span class="text-danger"> (*)</span></nz-form-label>
          <nz-form-control [nzSpan]="24">
            <nz-select formControlName="EmployeeLoaiHDLDID" nzAllowClear nzShowSearch>
              <nz-option *ngFor="let c of contractTypeList" [nzValue]="c.ID" [nzLabel]="c.Name"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-row [nzGutter]="24">
          <nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Ngày bắt đầu<span class="text-danger"> (*)</span></nz-form-label>
              <nz-form-control [nzSpan]="24">
                <nz-date-picker formControlName="DateStart" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </nz-col>
          <nz-col [nzSpan]="12">
            <nz-form-item>
              <nz-form-label [nzSpan]="24">Ngày kết thúc<span class="text-danger"> (*)</span></nz-form-label>
              <nz-form-control [nzSpan]="24">
                <nz-date-picker formControlName="DateEnd" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
              </nz-form-control>
            </nz-form-item>
          </nz-col>
      </nz-row>
      <nz-form-item>
          <nz-form-label [nzSpan]="24">Số hợp đồng<span class="text-danger"> (*)</span></nz-form-label>
          <nz-form-control [nzSpan]="24">
            <input nz-input formControlName="ContractNumber"/>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="24">Trạng thái</nz-form-label>
          <nz-form-control [nzSpan]="24">
            <nz-select formControlName="StatusSign">
              <nz-option [nzValue]="2" nzLabel="Đã ký"></nz-option>
              <nz-option [nzValue]="1" nzLabel="Chưa ký"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label [nzSpan]="24">Ngày ký</nz-form-label>
          <nz-form-control [nzSpan]="24">
            <nz-date-picker formControlName="DateSign" nzFormat="dd/MM/yyyy" style="width: 100%;"></nz-date-picker>
          </nz-form-control>
        </nz-form-item>
        </form>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-outline-danger"
          data-bs-dismiss="modal"
          style="border: 1px solid; border-radius: 0;"
        >
          Đóng
        </button>
        <button
          type="button"
          class="btn btn-primary"
          (click)="onSubmit()"
          style="border-radius: 0;"
        >
          Lưu
        </button>
      </div>
    </div>
  </div>
</div>
