<div class="card-body position-relative">
  <!-- Nút X để đóng modal - chỉ hiển thị khi mở dưới dạng modal -->
  <button *ngIf="activeModal"
          type="button"
          class="btn-close position-absolute"
          aria-label="Close"
          (click)="close()"
          title="Đóng">
  </button>

<form nz-form nzLayout="horizontal"  class="fs-7 form-header">
    <nz-row [nzGutter]="24">
      <!-- Mã sản phẩm-->
      <nz-col [nzSpan]="8" class="me-2 md-2">
        <nz-form-item>
          <nz-form-label [nzSpan]="6" required>
            Mã sản phẩm <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="text" name="ProductCode" [(ngModel)]="ProductCode" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Tồn kho đầu kì -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label required>
            Tồn kho đầu kì <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberBegin" [(ngModel)]="NumberBegin" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="6">Nhập<span style="color: red">(*)</span></nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberImport" [(ngModel)]="NumberImport" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label  [nzSpan]="8">SL đang mượn</nz-form-label>
          <nz-form-control [nzSpan]="16">
            <input nz-input type="number" name="NumberBorrowing" [(ngModel)]="NumberBorrowing" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>

    <nz-row [nzGutter]="24">
      <!-- Từ ngày -->
      <nz-col [nzSpan]="8" class="me-2 md-2">
        <nz-form-item>
          <nz-form-label [nzSpan]="6" required>
            Tên sản phẩm <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="text" name="ProductName" [(ngModel)]="ProductName" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Đến ngày -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label required>
            Tồn kho cuối kì <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="InventoryLatest" [(ngModel)]="InventoryLatest" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="6">Xuất<span style="color: red">(*)</span></nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberExport" [(ngModel)]="NumberExport" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="8">SL thực tế</nz-form-label>
          <nz-form-control [nzSpan]="16">
            <input nz-input type="number" name="InventoryReal" [(ngModel)]="InventoryReal" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
  </form>

  <div style="flex: 1; min-height: 0; overflow: hidden; height: 80vh;">
    <!-- Splitter layout giống C# form -->
  <nz-splitter >
    <!-- Left Panel: Bảng Mượn với Tab -->
    <nz-splitter-panel nzResizable="false" [nzMin]="20" [nzMax]="80">
      <nz-tabset class="borrow-tab custom-tab-title">
        <nz-tab nzTitle="Danh sách Mượn">
          <div #tbBorrowRef style="height: 100%; width: 100%;"></div>
        </nz-tab>
      </nz-tabset>
    </nz-splitter-panel>

    <!-- Right Panel: Splitter vertical cho Export (trên) và Import (dưới) -->
    <nz-splitter-panel nzResizable="false" [nzMin]="20" [nzMax]="80">
      <nz-splitter nzLayout="vertical">
        <!-- Top: Bảng Xuất với Tab -->
        <nz-splitter-panel nzResizable="true" [nzMin]="20" [nzMax]="80">
          <nz-tabset class="export-tab custom-tab-title">
            <nz-tab nzTitle="Danh sách Xuất">
              <div #tbExportRef style="height: 100%; width: 100%;"></div>
            </nz-tab>
          </nz-tabset>
        </nz-splitter-panel>

        <!-- Bottom: Bảng Nhập với Tab -->
        <nz-splitter-panel nzResizable="false" [nzMin]="20" [nzMax]="80">
          <nz-tabset class="import-tab custom-tab-title">
            <nz-tab nzTitle="Danh sách Nhập">
              <div #tbImportRef style="height: 100%; width: 100%;"></div>
            </nz-tab>
          </nz-tabset>
        </nz-splitter-panel>
      </nz-splitter>
    </nz-splitter-panel>
  </nz-splitter>
  </div>
</div>