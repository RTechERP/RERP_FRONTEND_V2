<div class="card-body position-relative">
  <!-- Nút X để đóng modal - chỉ hiển thị khi mở dưới dạng modal -->
  <button *ngIf="activeModal"
          type="button"
          class="btn-close position-absolute"
          aria-label="Close"
          (click)="close()"
          title="Đóng">
  </button>

<form nz-form nzLayout="horizontal"  class="fs-7 form-header">
    <nz-row [nzGutter]="24">
      <!-- Mã sản phẩm-->
      <nz-col [nzSpan]="8" class="me-2 md-2">
        <nz-form-item>
          <nz-form-label [nzSpan]="6" required>
            Mã sản phẩm <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="text" name="ProductCode" [(ngModel)]="ProductCode" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Tồn kho đầu kì -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label required>
            Tồn kho đầu kì <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberBegin" [(ngModel)]="NumberBegin" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="6">Nhập<span style="color: red">(*)</span></nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberImport" [(ngModel)]="NumberImport" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label  [nzSpan]="8">SL đang mượn</nz-form-label>
          <nz-form-control [nzSpan]="16">
            <input nz-input type="number" name="NumberBorrowing" [(ngModel)]="NumberBorrowing" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>

    <nz-row [nzGutter]="24">
      <!-- Từ ngày -->
      <nz-col [nzSpan]="8" class="me-2 md-2">
        <nz-form-item>
          <nz-form-label [nzSpan]="6" required>
            Tên sản phẩm <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="text" name="ProductName" [(ngModel)]="ProductName" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Đến ngày -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label required>
            Tồn kho cuối kì <span style="color: red">(*)</span>
          </nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="InventoryLatest" [(ngModel)]="InventoryLatest" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="6">Xuất<span style="color: red">(*)</span></nz-form-label>
          <nz-form-control [nzSpan]="18">
            <input nz-input type="number" name="NumberExport" [(ngModel)]="NumberExport" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>

      <!-- Lọc NCC -->
      <nz-col [nzSpan]="5">
        <nz-form-item>
          <nz-form-label [nzSpan]="8">SL thực tế</nz-form-label>
          <nz-form-control [nzSpan]="16">
            <input nz-input type="number" name="InventoryReal" [(ngModel)]="InventoryReal" [readonly]="true"
              style="width: 100%;" />
          </nz-form-control>
        </nz-form-item>
      </nz-col>
    </nz-row>
  </form>

  <div style="flex: 1; height: 80vh;">
    <!-- Splitter layout giống C# form -->
  <p-splitter [style]="{'height': '100%'}" [panelSizes]="[50, 50]">
    <!-- Left Panel: Card Mượn -->
    <ng-template #panel>
      <p-card header="Danh sách Mượn" styleClass="h-100">
        <div class="grid-container-borrow">
          <angular-slickgrid
            gridId="gridBorrow"
            [columns]="columnDefinitionsBorrow"
            [options]="gridOptionsBorrow"
            [dataset]="datasetBorrow"
            (onAngularGridCreated)="angularGridReadyBorrow($event.detail)">
          </angular-slickgrid>
        </div>
      </p-card>
    </ng-template>

    <!-- Right Panel: Splitter vertical cho Export (trên) và Import (dưới) -->
    <ng-template #panel>
      <p-splitter layout="vertical"  [panelSizes]="[50, 50]">
        <!-- Top: Card Xuất -->
        <ng-template #panel>
          <p-card header="Danh sách Xuất" styleClass="h-100">
            <div class="grid-container-export">
              <angular-slickgrid
                gridId="gridExport"
                [columns]="columnDefinitionsExport"
                [options]="gridOptionsExport"
                [dataset]="datasetExport"
                (onAngularGridCreated)="angularGridReadyExport($event.detail)"
                (onDblClick)="onExportDblClick($event)">
              </angular-slickgrid>
            </div>
          </p-card>
        </ng-template>

        <!-- Bottom: Card Nhập -->
        <ng-template #panel>
          <p-card header="Danh sách Nhập" styleClass="h-100">
            <div class="grid-container-import">
              <angular-slickgrid
                gridId="gridImport"
                [columns]="columnDefinitionsImport"
                [options]="gridOptionsImport"
                [dataset]="datasetImport"
                (onAngularGridCreated)="angularGridReadyImport($event.detail)"
                (onDblClick)="onImportDblClick($event)">
              </angular-slickgrid>
            </div>
          </p-card>
        </ng-template>
      </p-splitter>
    </ng-template>
  </p-splitter>
  </div>
</div>