<div style="display: flex; flex-direction: column; height: 100vh;">
  <!-- Header -->
  <div class="bg-primary align-items-center ps-2 pe-2" style="flex-shrink: 0; display: flex; justify-content: space-between; padding: 0.5rem;">
    <h6 class="text-light text-uppercase m-0" style="padding: 0 0.5rem;">
      Lịch sử phát sinh dự án {{projectCode}}
    </h6>
    <button type="button" class="btn-close" (click)="onCloseModal()" aria-label="Close"></button>
  </div>

  <!-- Body -->
  <div class="p-0" style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
    <div class="card h-100 border-0 rounded-0" style="display: flex; flex-direction: column; height: 100%;">
      <div class="card-header bg-white p-1" style="flex-shrink: 0;">
        <div class="d-flex gap-2 align-items-center flex-wrap">
          <button class="fs-12" nz-button nzType="default" nzSize="small" (click)="exportExcel()">
            <img src="assets/icon/action_export_excel_16.png" alt="Xuất Excel" class="me-1" />Xuất Excel
          </button>
        </div>
      </div>
      <div class="card-body p-0 ms-2" style="flex: 1; overflow: hidden; display: flex; flex-direction: column;">
        <!-- Splitter dọc chia làm 2 phần trên và dưới -->
        <nz-splitter nzLayout="vertical" style="height: 100%; flex: 1;">
          <!-- Panel phía trên: Bảng 1 - Lịch sử phát sinh -->
          <nz-splitter-panel nzDefaultSize="50%">
            <div class="card h-100 border-0 rounded-0" style="display: flex; flex-direction: column; height: 100%;">
              <div class="card-header bg-white p-1" style="flex-shrink: 0;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="m-0 ms-2">Lịch sử phát sinh</h6>
                </div>
              </div>
              <div class="card-body p-0" style="flex: 1; overflow: hidden; display: flex; flex-direction: column; min-height: 0;">
                <div #tb_history style="flex: 1; width: 100%; height: 100%;"></div>
              </div>
            </div>
          </nz-splitter-panel>

          <!-- Panel phía dưới: Bảng 2 - Chi tiết phát sinh -->
          <nz-splitter-panel nzDefaultSize="50%">
            <div class="card h-100 border-0 rounded-0" style="display: flex; flex-direction: column; height: 100%;">
              <div class="card-header bg-white p-1" style="flex-shrink: 0;">
                <div class="d-flex justify-content-between align-items-center">
                  <h6 class="m-0 ms-2">Chi tiết phát sinh</h6>
                </div>
              </div>
              <div class="card-body p-0" style="flex: 1; overflow: hidden; display: flex; flex-direction: column; min-height: 0;">
                <div #tb_detail style="flex: 1; width: 100%; height: 100%;"></div>
              </div>
            </div>
          </nz-splitter-panel>
        </nz-splitter>
      </div>
    </div>
  </div>

  <!-- Modal Footer -->
  <div class="modal-footer bg-whitesmoke p-2 d-flex justify-content-end gap-2" style="flex-shrink: 0;">
    <button nz-button nzType="default" nzDanger (click)="onCloseModal()">
      Đóng
    </button>
    <button nz-button nzType="primary" (click)="saveData()">
      Lưu
    </button>
  </div>
</div>
