<ng-container class="w-100">
  <div class="card h-100 border-0 rounded-0" style="background: transparent">
    <div class="card-header bg-white p-1">
      <div class="d-flex gap-1 align-items-center">
        <p-menubar [model]="inventoryProjectMenu" class="p-0 border-0">
        </p-menubar>
      </div>
    </div>
    <nz-spin [nzSpinning]="isLoading">
      <div
        class="filter-bar bg-light border-bottom p-2 py-0"
        *ngIf="true"
        [class.mobile-modal]="true"
      >
        <form
          nz-form
          nzLayout="inline"
          class="d-flex flex-wrap gap-2 align-items-center my-1"
        >
          <nz-form-item>
            <nz-form-label class="fs-12">Dự án</nz-form-label>
            <nz-form-control>
              <nz-select
                class="w-100 fs-12"
                nzSize="small"
                nzShowSearch
                nzAllowClear
                nzPlaceHolder="Chọn dự án..."
                [(ngModel)]="projectID"
                (ngModelChange)="projectID = $event ?? 0"
                name="projectID"
                style="width: 50vh !important"
              >
                <nz-option [nzValue]="0" nzLabel="-- Tất cả --"></nz-option>
                <nz-option
                  *ngFor="let project of projectList"
                  [nzValue]="project.ID"
                  [nzLabel]="project.ProjectCode + ' - ' + project.ProjectName"
                >
                </nz-option>
              </nz-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label class="fs-12">Nhân viên</nz-form-label>
            <nz-form-control>
              <nz-select
                nzShowSearch
                nzAllowClear
                nzSize="small"
                nzPlaceHolder="Chọn nhân viên"
                [(ngModel)]="employeeID"
                style="width: 30vh !important"
              >
                @for (parent of employeeList; track $index) {
                  <nz-option-group [nzLabel]="parent.label">
                    @for (child of parent.options; track $index) {
                      <nz-option
                        nzCustomContent="true"
                        [nzLabel]="child.item.FullName"
                        [nzValue]="child.item.ID"
                        >{{
                          child.item.Code + " - " + child.item.FullName
                        }}</nz-option
                      >
                    }
                  </nz-option-group>
                }
              </nz-select>
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label class="fs-12">Từ khóa</nz-form-label>
            <nz-form-control>
              <input
                name="searchValue"
                nz-input
                nzSize="small"
                placeholder="Nhập từ khóa..."
                [(ngModel)]="keyword"
                (keyup.enter)="onSearch()"
                style="width: 25vh !important"
              />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item class="mb-0">
            <nz-form-control>
              <div class="btn-group">
                <button
                  nz-button
                  nzType="primary"
                  nzSize="small"
                  (click)="onSearch()"
                >
                  Tìm kiếm
                </button>
              </div>
            </nz-form-control>
          </nz-form-item>
        </form>
      </div>

      <div class="card-body p-0 w-100" style="height: calc(100vh - 200px)">
        <div class="container-{{ idTable }}" style="height: 100%">
          <angular-slickgrid
            gridId="inventoryProjectGrid-{{ idTable }}"
            [columns]="columnDefinitions"
            [options]="gridOptions"
            [dataset]="dataset"
            (onAngularGridCreated)="angularGridReady($event.detail)"
            (onPaginationChanged)="updateMasterFooterRow()"
          >
          </angular-slickgrid>
        </div>
      </div>
    </nz-spin>
  </div>
</ng-container>
