<div class="modal-header bg-primary p-2"><h6 class="modal-title text-white m-0">CHI TIẾT ĐĂNG KÝ</h6>
  <button
    type="button"
    class="btn-close btn-close-white"
    (click)="closeModal()"
    aria-label="Close"
  ></button>
</div>
<div class="training-form-container">
  <!-- Form thông tin chính -->
<form nz-form [formGroup]="validateForm" [nzLayout]="validateForm.controls.formLayout.value" nzLayout="vertical" (ngSubmit)="submitForm()">
  <div nz-row [nzGutter]="16">
    <!-- Cột 1 -->
    <div nz-col [nzSpan]="8">
      <!-- Nhân viên -->
      <nz-form-item class="compact-form-item">
        <nz-form-label [nzSpan]="isHorizontal ? 8 : null" nzRequired>Nhân viên</nz-form-label>
        <nz-form-control [nzSpan]="isHorizontal ? 16 : null" nzErrorTip="Vui lòng chọn nhân viên!">
          <nz-select
            formControlName="EmployeeID"
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Chọn nhân viên"
            nzSize="default"
          >
            <nz-option
              *ngFor="let employee of lstEmployees"
              [nzValue]="employee.ID"
              [nzLabel]="employee.Code + ' - ' + employee.FullName"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <!-- Loại đào tạo -->
      <nz-form-item class="compact-form-item">
        <nz-form-label [nzSpan]="isHorizontal ? 8 : null" nzRequired>Loại đào tạo</nz-form-label>
        <nz-form-control [nzSpan]="isHorizontal ? 16 : null" nzErrorTip="Vui lòng chọn loại đào tạo!">
          <nz-select
            formControlName="TrainingType"
            nzShowSearch
            nzAllowClear
            nzPlaceHolder="Chọn loại đào tạo"
            nzSize="default"
          >
            <nz-option
              *ngFor="let type of trainingTypes"
              [nzValue]="type.ID"
              [nzLabel]="type.Name"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

    <!-- Cột 2 -->
    <div nz-col [nzSpan]="8">
      <!-- Mục đích đào tạo -->
      <nz-form-item class="compact-form-item">
        <nz-form-label [nzSpan]="isHorizontal ? 8 : null" nzRequired>Mục đích đào tạo</nz-form-label>
        <nz-form-control [nzSpan]="isHorizontal ? 16 : null" nzErrorTip="Vui lòng nhập mục đích đào tạo!">
          <input
            nz-input
            formControlName="Purpose"
            placeholder="Nhập mục đích đào tạo"
            nzSize="default"
          />
        </nz-form-control>
      </nz-form-item>

      <!-- Số lượng buổi/khóa -->
      <nz-form-item class="compact-form-item">
        <nz-form-label [nzSpan]="isHorizontal ? 8 : null" nzRequired>Số buổi / khóa</nz-form-label>
        <nz-form-control [nzSpan]="isHorizontal ? 16 : null" nzErrorTip="Vui lòng nhập số buổi!">
          <nz-input-number
            formControlName="SessionsPerCourse"
            [nzMin]="1"
            [nzStep]="1"
            nzPlaceHolder="Nhập số buổi"
            nzSize="default"
            style="width: 100%"
          ></nz-input-number>
        </nz-form-control>
      </nz-form-item>
    </div>

    <!-- Cột 3 -->
    <div nz-col [nzSpan]="8">
      <!-- Số phút/buổi -->
      <nz-form-item class="compact-form-item">
        <nz-form-label [nzSpan]="isHorizontal ? 8 : null" nzRequired>Số phút / buổi</nz-form-label>
        <nz-form-control [nzSpan]="isHorizontal ? 16 : null" nzErrorTip="Vui lòng nhập số phút!">
          <nz-input-number
            aria-label="Số phút / buổi"
            formControlName="SessionDuration"
            [nzMin]="15"
            [nzStep]="15"
            nzPlaceHolder="Nhập số phút"
            nzSize="default"
            style="width: 100%"
          ></nz-input-number>
        </nz-form-control>
      </nz-form-item>

  <!-- Thời gian đào tạo -->
  <nz-form-item class="compact-form-item">
    <nz-form-label [nzSpan]="isHorizontal ? 4 : null" nzRequired>Thời gian đào tạo</nz-form-label>
    <nz-form-control [nzSpan]="isHorizontal ? 8 : null" nzErrorTip="Vui lòng chọn thời gian đào tạo!">
      <nz-range-picker formControlName="TrainingRange" nzFormat="dd/MM/yyyy"></nz-range-picker>
    </nz-form-control>
  </nz-form-item>

    </div>
  </div>

  <!-- Hàng 2: Đánh giá & Cấp chứng chỉ -->
  <div nz-row [nzGutter]="16">
    <div nz-col [nzSpan]="8">
      <nz-form-item class="compact-form-item">
        <nz-form-label>Đánh giá mức độ hoàn thành</nz-form-label>
        <nz-form-control>
          <nz-select
            [(ngModel)]="formData.CompletionAssessment"
            name="completionAssessment"
            nzAllowClear
            nzPlaceHolder="Chọn mức độ hoàn thành"
            nzSize="default"
          >
            <nz-option nzValue="Xuất sắc" nzLabel="Xuất sắc"></nz-option>
            <nz-option nzValue="Tốt" nzLabel="Tốt"></nz-option>
            <nz-option nzValue="Khá" nzLabel="Khá"></nz-option>
            <nz-option nzValue="Trung bình" nzLabel="Trung bình"></nz-option>
            <nz-option nzValue="Yếu" nzLabel="Yếu"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </div>

      <div nz-col [nzSpan]="4">
    <nz-form-item class="compact-form-item" style="margin-top: 22px;">
      <nz-form-control>
        <label
          nz-checkbox
          [(ngModel)]="formData.IsCertification"
          name="isCertification"
        >
          Cấp chứng chỉ
        </label>
      </nz-form-control>
    </nz-form-item>
  </div>
  </div>
</form>


  <!-- Phần bảng chi tiết và file ở dưới -->
  <div class="tables-section">
    <div nz-row [nzGutter]="16">
      <!-- Cột trái - Bảng chi tiết -->
      <div nz-col [nzSpan]="12">
        <div class="detail-container">
          <h6>Hạng mục đăng ký</h6>
          <div #detailTable class="detail-table"></div>
        </div>
      </div>

      <!-- Cột phải - Bảng file -->
      <div nz-col [nzSpan]="12">
        <div class="file-container">
          <div class="file-upload-section mb-2">
            <nz-upload
              [(nzFileList)]="fileList"
              [nzBeforeUpload]="beforeUpload"
              [nzMultiple]="true"
              [nzShowUploadList]="false"
            >
              <button nz-button nzSize="default">
                <i nz-icon nzType="upload"></i>
                Thêm file đính kèm
              </button>
            </nz-upload>
          </div>
          <div #fileTable class="file-table"></div>
        </div>
      </div>
    </div>
  </div>

<div class="modal-footer p-2">
  <button nz-button nzType="default" (click)="closeModal()">Hủy</button>
  <button nz-button nzType="primary" (click)="uploadFilesAndSaveData()">
    Lưu dữ liệu
  </button>
</div>
